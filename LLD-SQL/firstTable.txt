CREATE TABLE CLIENT (
    ID INTEGER PRIMARY KEY AUTOINCREMENT,
    NAME TEXT NOT NULL,
    LAST_NAME TEXT NOT NULL,
    GENDER TEXT,
    PHONE_NUMBER TEXT,
    EMAIL TEXT UNIQUE,
    RFC TEXT UNIQUE,
    CURP TEXT UNIQUE,
    ADDRESS TEXT,
    AGE INTEGER,
    BIRTHDATE DATE
);

CREATE TABLE AGENT (
    ID INTEGER PRIMARY KEY AUTOINCREMENT,
    NAME TEXT NOT NULL,
    LASTNAME TEXT NOT NULL
);

CREATE TABLE AFFAIRES (
    ID INTEGER PRIMARY KEY AUTOINCREMENT,
    INIT_DATE DATE NOT NULL,
    END_DATE DATE,
    STATUS TEXT CHECK(STATUS IN ('COMPLETED', 'PROCESS')) NOT NULL,
    CLIENT_ID INTEGER,
    AGENT_ID INTEGER,
    FOREIGN KEY (CLIENT_ID) REFERENCES CLIENT(ID) ON DELETE SET NULL ON UPDATE CASCADE,
    FOREIGN KEY (AGENT_ID) REFERENCES AGENT(ID) ON DELETE SET NULL ON UPDATE CASCADE
);